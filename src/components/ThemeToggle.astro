<button
    id="themeToggle"
    type="button"
    >
    <svg
        fill="currentColor"
        viewBox="0 0 102 104"
        aria-hidden="true"
        focusable="false"
        >
        <path d="M52.553 103.648c-1.42 0-2.85-.06-4.26-.18-13.98-1.11-26.68-7.61-35.78-18.29-18.78-22.03-16.11-55.23 5.92-73.99 6.37-5.44 13.7-9.17 21.78-11.09 1.32-.31 2.68.13 3.55 1.16.87 1.02 1.09 2.46.58 3.7-6.61 15.86-3.79 33.8 7.33 46.86 11.12 13.06 28.42 18.69 45.12 14.69 1.3-.31 2.68.13 3.55 1.16.87 1.03 1.09 2.46.58 3.7-3.2 7.67-8.04 14.3-14.42 19.74-9.58 8.16-21.52 12.54-33.95 12.54Zm-17.17-94.51c-4.44 1.8-8.57 4.31-12.32 7.51-19.03 16.21-21.32 44.88-5.11 63.89 7.85 9.23 18.82 14.82 30.89 15.8 12.07.98 23.8-2.83 33.01-10.68 3.75-3.18 6.87-6.85 9.37-10.96-16.98 1.67-33.73-4.97-45.01-18.21-11.29-13.24-15.18-30.84-10.84-47.34l.02-.02-.01.01Z"></path>
    </svg>
    <svg
        fill="currentColor"
        viewBox="0 0 126 126"
        aria-hidden="true"
        focusable="false"
        >
        <path d="M63 97.06c-18.96 0-34.39-15.44-34.39-34.39 0-18.95 15.44-34.39 34.39-34.39 18.95 0 34.39 15.44 34.39 34.39 0 18.95-15.44 34.39-34.39 34.39Zm0-60.56c-14.43 0-26.16 11.73-26.16 26.16S48.57 88.82 63 88.82s26.16-11.73 26.16-26.16S77.43 36.5 63 36.5ZM94.32 35.68a4.07 4.07 0 0 1-2.91-1.2 4.11 4.11 0 0 1 0-5.82l10.22-10.22a4.11 4.11 0 0 1 5.82 0 4.11 4.11 0 0 1 0 5.82L97.23 34.48c-.8.8-1.86 1.2-2.91 1.2ZM121.75 67h-14.46a4.11 4.11 0 1 1 0-8.22h14.46a4.11 4.11 0 1 1 0 8.22ZM104.56 108.55a4.07 4.07 0 0 1-2.91-1.2L91.43 97.13a4.11 4.11 0 0 1 0-5.82 4.11 4.11 0 0 1 5.82 0l10.22 10.22a4.11 4.11 0 0 1-2.91 7.02ZM63 125.75a4.11 4.11 0 0 1-4.11-4.11v-14.46a4.11 4.11 0 1 1 8.22 0v14.46a4.11 4.11 0 0 1-4.11 4.11ZM21.45 108.55a4.07 4.07 0 0 1-2.91-1.2 4.11 4.11 0 0 1 0-5.82l10.22-10.22a4.11 4.11 0 0 1 5.82 0 4.11 4.11 0 0 1 0 5.82l-10.22 10.22c-.8.8-1.86 1.2-2.91 1.2ZM18.7 67H4.24a4.11 4.11 0 1 1 0-8.22H18.7a4.11 4.11 0 1 1 0 8.22ZM31.69 35.68a4.07 4.07 0 0 1-2.91-1.2L18.56 24.26a4.11 4.11 0 0 1 0-5.82 4.11 4.11 0 0 1 5.82 0L34.6 28.66a4.11 4.11 0 0 1-2.91 7.02ZM63 22.69a4.11 4.11 0 0 1-4.11-4.11V4.11a4.11 4.11 0 1 1 8.22 0v14.46A4.11 4.11 0 0 1 63 22.68v.01Z"></path>{' '}
    </svg>
</button>

<style>
    button {
        --diameter: 2rem;
        --spacing: .2rem;
        --is-active: 0;
        inline-size: calc(var(--diameter) * 2 + var(--spacing) * 3);
        block-size: calc(var(--diameter) + var(--spacing) * 2);
        border: none;
        cursor: pointer;
        position: absolute;
        top: 1.3rem;
        right: 5rem;
        border-radius: var(--diameter);
        background-color: var(--accent);
        display: inline-flex;
        align-items: center;
        justify-content: space-around;
        z-index: 5;
        transition: background-color .3s ease-in-out,color .3s ease-in-out;
        outline-color: transparent;
        outline-style: solid;
        z-index: 5;
        box-shadow: 0 0 0 2px var(--text);

        &[aria-pressed="true"] {
            --is-active: 1
        }

        &::before {
            --offset: calc(100% - var(--diameter) - var(--spacing) * 2);
            content: "";
            position: absolute;
            inset-inline-start: calc(var(--spacing) + var(--offset) * var(--is-active, 0));
            inset-block-start: var(--spacing);
            border-radius: 50%;
            inline-size: var(--diameter);
            block-size: var(--diameter);
            background: red;
            transition: inset-inline-start .3s ease-in-out;
        }

        svg {
            width: 1.5rem;
            height: 1.5rem;
            fill: var(--text);
        }
    }
</style>

<script>
    let theme = localStorage.getItem("theme") ?? 'light';
    const button = document.getElementById("themeToggle") as HTMLButtonElement;

    if(theme === "dark") {
        button.setAttribute("aria-pressed", "true");
        document.documentElement.dataset.theme = "dark"
    } else {
        button.setAttribute("aria-pressed", "false");
        document.documentElement.dataset.theme = "light"
    }

    button.addEventListener("click", () => {
        const newTheme = theme === "light" ? "dark" : "light";
        theme = newTheme; 
        document.documentElement.dataset.theme = newTheme
        button.setAttribute("aria-pressed", newTheme === "dark" ? "true" : "false");
        localStorage.setItem("theme", newTheme);
    })

</script>
